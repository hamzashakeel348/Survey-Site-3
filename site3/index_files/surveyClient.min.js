(function(n,t,i){function e(f){var e,o,h,s;if(t("#stepPlaceholder").hide(),u=f,f.isFinalQuestion){f.exitLinkOut!==""&&r.registrationPlacement!==1?window.location=f.exitLinkOut:(t("#stepPlaceholder").hide(),k());return}if(r.isFrame&&window.parent.postMessage(["sendVariables",u.surveyVariables],"*"),t("#questionID").val(f.questionID),e=t("#stepPlaceholder").empty().append(t("#questionTemplate").clone()),e.find("#blockHeader").html(f.headerName),f.headerName!==null&&f.headerName.length===0&&e.find("#blockHeader").hide(),e.find("#questionText").html(f.questionText),e.find("#questionFooter").html(f.questionFooter),f.hasTextField){e.find("#textField").append("<input class='form-control text-center col-8' id='textFieldCtrl'/>");o=e.find("#textFieldCtrl");o.attr("name",f.textFieldVariable);o.attr("placeholder",f.textFieldPlaceholder);o.attr("maxlength",f.textFieldMaxLength);f.textFieldRequired&&o.attr("required",!0);o.on("keyup keypress",function(n){var t=n.keyCode||n.which;if(t===13)return n.preventDefault(),!1})}switch(f.type){case"list":t("#questionAnswers").addClass("justify-content-center");h=f.answers.length>2?"btn-block":"col-sm";t.each(f.answers,function(n,t){t.linkoutUrl!==null&&t.linkoutUrl.length>10?e.find("#questionAnswers").append("<button type='button' class='svbtn survey-button "+h+" "+t.addClass+"' onclick='cfSurvey.linkoutClicked(\""+f.formName+'","'+t.value+'","'+t.linkoutUrl+"\")'>"+t.answerText+"<\/button>"):e.find("#questionAnswers").append("<button type='button' class='svbtn survey-button "+h+" "+t.addClass+"' onclick='cfSurvey.answerQuestion(\""+f.formName+'","'+t.value+"\")'>"+t.answerText+"<\/button>")});break;case"checklist":t("#questionAnswers").addClass("justify-content-center");f.answers.forEach(function(n){t("#questionAnswers").append('<label class="svbtn survey-checklist-box"><input class="survey-checklist-input form-check-input" type="checkbox" onclick="cfSurvey.checkboxClicked(this, \''+f.formName+'\')" value="'+n.value+'">'+n.answerText+"<\/label>")});t("#questionAnswers").after('<div class="survey-message"><p class="survey-message-text">Please make a selection and then click continue<\/p><\/div > <div class="row justify-content-center"><button type="button" style="margin-top: 5px;" class="svbtn btn-block survey-button" onclick="cfSurvey.submitCheckboxQuestion()">Continue<\/button><\/div>');f.isLastChecklistReset&&t("#questionAnswers label:last").addClass("survey-checklist-box-not").find(".survey-checklist-input").addClass("survey-checklist-input--not");break;case"dropdown":t("#questionAnswers").append('<div class="form-group d-flex flex-column survey-dropdown" style="text-align: center; width: 90%; margin: 0 auto;"><\/div>');t("#questionAnswers .form-group").append("<select class='form-control' id=\"survey-dropdown-select\"><\/select>");s=t("#survey-dropdown-select");s.prepend("<option disabled selected>Select an option<\/option>");f.answers.forEach(function(n){s.append(t("<option><\/option>").val(n.value).html(n.answerText).attr("linkoutUrl",n.linkoutUrl))});s[0].addEventListener("change",function(i){n.linkoutClicked(f.formName,i.target.value,t(i.target).find("option:selected").attr("linkoutUrl"))})}if(f.advEntries.length>0){t.each(f.advEntries,function(n,i){t("#advBlock").append("<div class='row advContainer' data-adv=\""+f.advertiserID+'" data-href="'+i.url+"\"><div class='col-4 text-center advLogo'><img src='"+i.logo+"'/><\/div><div class='col-8 advTextBlock'><div class='advTitle'>"+i.title+"<\/div><div class='advDescription'>"+i.description+"<\/div><\/div><\/div>")});t(".advContainer").css("cursor","pointer").on("click",function(){window.open(t(this).data("href"));n.submitAdvTracking(t(this).data("href"),t(this).data("adv"))})}f.clinicalTrial.length>0&&(t.each(f.clinicalTrial,function(n,i){var r="clinicalTrial_"+i.id;t("#clinicalBlock").append("<div class='row clinicEntry'><input type='checkbox' name='"+r+"' id='"+r+"'><label for='"+r+"'>"+i.name+"<\/label><\/div>")}),t("#clinicalBlock").append(t("#clinicalTemplate").clone()),t("#clinicalBlock :checkbox").change(function(){t("#clinicalBlock :checkbox:checked").length>0?t("#clinicalBlock .disclaimer").collapse("show"):t("#clinicalBlock .disclaimer").collapse("hide")}),t("#questionAnswers").empty(),t("#clinicalBlock .clinicalDisclaimer").html(cfConfig.clinicalDisclaimer===i?"":cfConfig.clinicalDisclaimer),t("#clinicalBlock input[name=clinicalCheckbox]").change(function(n){typeof clinicalDisclosureChange=="function"&&window.clinicalDisclosureChange(n)}));t("#mainForm").removeClass("was-validated");y()}function l(){typeof beforeSubmitAnswer=="function"&&window.beforeSubmitAnswer();g();t.post({url:r.siteUrl+"/survey/answer",data:new FormData(t("#mainForm")[0]),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:e})}function a(n){t.get({url:r.siteUrl+"/survey/startSurvey/"+n,beforeSend:f,success:w,xhrFields:{withCredentials:!0}})}function w(n){e(n);typeof surveyStarted=="function"&&window.surveyStarted()}function v(n){t.get({url:r.siteUrl+"/survey/startRegistration/"+n,beforeSend:f,success:b,xhrFields:{withCredentials:!0}})}function b(n){h(n);typeof registrationStarted=="function"&&window.registrationStarted()}function h(u){if(u.registrationCompleted&&u.registrationType===3){t("#stepPlaceholder").hide();typeof afterOptOut=="function"&&window.afterOptOut();return}u.registrationCompleted&&u.exitLinkOut!==""&&r.registrationPlacement!==0&&(window.location=u.exitLinkOut);u.registrationCompleted&&d();u.isSuccess||alert(u.errorMessage);typeof beforeShowRegForm=="function"&&window.beforeShowRegForm({regType:u.registrationStep,regStep:u.registrationType});u.registrationStep===1&&(t(".emailDisclaimer").html(cfConfig.emailDisclaimer===i?u.emailDisclaimer:cfConfig.emailDisclaimer),t(".tcpaDisclaimer").html(cfConfig.tcpaDisclaimer===i?u.tcpaDisclaimer:cfConfig.tcpaDisclaimer));t("#stepPlaceholder").hide();t("#stepPlaceholder").empty().append(t("#registrationStep_"+u.registrationType+"_"+u.registrationStep).clone());t("#stepPlaceholder .reg-control").on("keyup keypress",function(t){var i=t.keyCode||t.which;if(i===13)return n.postRegistration(),t.preventDefault(),!1});t("#header_"+u.registrationType+"_"+u.registrationStep).html(u.headerText).addClass(u.headerText.length===0?"empty--element":"");t("#title_"+u.registrationType+"_"+u.registrationStep).html(u.titleText).addClass(u.headerText.length===0?"empty--element":"");t("#call_"+u.registrationType+"_"+u.registrationStep).html(u.callToActionText).addClass(u.headerText.length===0?"empty--element":"");(u.registrationStep===3||u.registrationType===3)&&(t("input[name=phone]").keyup(function(){t(this).val(t(this).val().replace(/(\d{3})-?(\d{3})-?(\d{4})/,"$1-$2-$3"))}),t("input[name=tcpa]").change(function(n){typeof tcpaChange=="function"&&window.tcpaChange(n)}));t("#mainForm").removeClass("was-validated");t("#mainForm button").prop("disabled",!1);t.each(u.data,function(n,i){var r=t("#stepPlaceholder [name="+n+"]");r.length>0&&i!==0&&r.val(i)});y();t("#stepPlaceholder").find("*").filter(":input:visible:first").focus()}function f(n){n.setRequestHeader("TRACK-TOKEN",o!==""?o:t('#mainForm input:hidden[name="trackingGuid"]').val());n.setRequestHeader("XSRF-TOKEN",s!==""?s:t('input:hidden[name="__RequestVerificationToken"]').val())}function c(){return(t("#mainForm").addClass("was-validated"),!t("#mainForm")[0].checkValidity())?(t(t(".form-control:invalid")[0]).focus(),!1):!0}function y(){t("#stepPlaceholder").css("visibility","hidden").show();r.isFrame&&window.parent.postMessage(["setHeight",t("body")[0].clientHeight],"*");typeof beforeShowQuestion=="function"&&window.beforeShowQuestion({totalSteps:u.totalSurveySteps,currentStep:u.surveyStep,variables:u.surveyVariables});t("#stepPlaceholder").css("visibility","visible")}function k(){r.registrationType>0&&r.registrationPlacement===1?v(r.surveyID):p()}function d(){r.registrationPlacement===0?a(r.surveyID):p()}function p(){r.isFrame&&window.parent.postMessage(["endSurvey"],"*");typeof endSurvey=="function"&&window.endSurvey({totalSteps:u.totalSurveySteps,currentStep:u.surveyStep,variables:u.surveyVariables,ow:u.offerWallID})}function g(){try{}catch(n){}}var r=cfConfig,u={},o="",s="";n.answerQuestion=function(n,i){c()&&(t("#stepPlaceholder input[name="+n+"]").length===0&&t("#stepPlaceholder").append('<input type="hidden" name="'+n+'" />'),t("#stepPlaceholder input[name="+n+"]").val(i),t("#mainForm [name=answerID]").val(t.grep(u.answers,function(n){return n.value===i})[0].answerID),l())};n.checkboxClicked=function(n,i){var f,r;t("#stepPlaceholder input[name="+i+"]").length===0&&t("#stepPlaceholder").append('<input type="hidden" name="'+i+'" />');t(n).hasClass("survey-checklist-input--not")?n.checked&&t(".survey-checklist-input").not(".survey-checklist-input--not").prop("checked",!1):n.checked&&t(".survey-checklist-input--not").prop("checked",!1);f=t(".survey-checklist-input:checked").map(function(){return t(this).val()}).get().join();t("#stepPlaceholder input[name="+i+"]").val(f);r=[];t.each(t(".survey-checklist-input:checked").map(function(){return t(this).val()}).get(),function(){r.push(t.grep(u.answers,function(n){return n.value===answerValue})[0].answerID)});t("#mainForm [name=answerID]").val(r)};n.submitCheckboxQuestion=function(){if(t(".survey-checklist-input:checked").length===0)return t(".survey-message").css("opacity",1),!1;l()};n.submitAdvTracking=function(n,i){var u=new FormData(t("#mainForm")[0]);u.append("url",n);u.append("adv",i);t.post({url:r.siteUrl+"/survey/advTracking",data:u,contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:e})};n.postRegistration=function(){if(t("#mainForm").addClass("was-validated"),!t("#mainForm")[0].checkValidity()){t(t(".form-control:invalid")[0]).focus();return}return typeof beforeSubmitRegForm=="function"&&window.beforeSubmitRegForm(),t("#mainForm button").prop("disabled",!0),t.post({url:r.siteUrl+"/survey/registration",data:new FormData(t("#mainForm")[0]),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:h}),!1};n.skipStep=function(){return t("#mainForm button").prop("disabled",!0),t.post({url:r.siteUrl+"/survey/skipRegistrationStep",data:new FormData(t("#mainForm")[0]),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:h}),!1};n.linkoutClicked=function(t,r,u){c()&&(u!==i&&u.length>10&&window.open(u),n.answerQuestion(t,r))};n.startForm=function(){o=t('#mainForm input:hidden[name="trackingGuid"]').val();s=t('input:hidden[name="__RequestVerificationToken"]').val();r.registrationType>0&&r.registrationPlacement===0?v(r.surveyID):a(r.surveyID)};n.getInfo=function(){return{totalSteps:u.totalSurveySteps,currentStep:u.surveyStep,variables:u.surveyVariables}};n.postTracking=function(n){t.post({url:r.siteUrl+"/survey/tracking",data:JSON.stringify(n),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0}})};n.skipClinical=function(){t.post({url:r.siteUrl+"/survey/skipClinical",data:new FormData(t("#mainForm")[0]),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:e})};n.postClinical=function(){c()&&t.post({url:r.siteUrl+"/survey/postClinical",data:new FormData(t("#mainForm")[0]),contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0},success:e})};n.postOwClick=function(n){t.get({url:r.siteUrl+"/survey/postOwClick/"+n,contentType:!1,processData:!1,beforeSend:f,xhrFields:{withCredentials:!0}})}})(window.cfSurvey=window.cfSurvey||{},jQuery);jQuery(document).ready(function(){cfSurvey.startForm()});